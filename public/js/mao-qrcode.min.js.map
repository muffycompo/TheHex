{"version":3,"sources":["qr.js","order.js","camera.js","init.js"],"names":["read","a","$","ajax","url","type","data","thc","success","customer_details","dataType","audio","attr","play","customer_photo","account_balance","firstname","lastname","email","phone","hostel_address","formattedNumber","numeral","payment","format","custId","html","profile","photo_path","val","id","qrcode","callback","document","ready","notifyUser","orderAmnt","orderCat","swal","title","text","decodeHtml","message","showCancelButton","confirmButtonColor","confirmButtonText","closeOnConfirm","amount_balance","nmb","txt","createElement","innerHTML","value","validate","rules","order_amount","required","number","messages","require","orderAmount","orderCategory","customerId","on","e","preventDefault","customer_id","amount","category","console","log","error","camera","p_vid_id","p_inter","p_scale","start","int_id","setInterval","video","scale","capture","interval","stop","clearInterval","w","videoWidth","h","videoHeight","qr_can","getElementById","getContext","drawImage","decode","err","scan_message","undefined","vid_id","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","cam_video_id","window","addEventListener","options","stream","src","URL","createObjectURL","cam"],"mappings":"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","file":"mao-qrcode.min.js","sourcesContent":["function read(a)\n{\n    //$(\"#qr-value\").text(a);\n    // Retrieve Customer Details\n    $.ajax({\n        url: '/admin/user/customerforcashier',\n        type: \"get\",\n        data: {thc: a},\n        success: customer_details,\n        dataType: 'json'\n    });\n}\n\n// Customer Details Callback\nfunction customer_details(data){\n\n    // Audio Experiment\n    var audio = $('#audioBeep').attr('src','/audio/beep.mp3')[0];\n    audio.play();\n\n    var customer_photo = $('#customer_photo');\n    var thc = $('#thc');\n    var account_balance = $('#account_balance');\n    var firstname = $('#firstname');\n    var lastname = $('#lastname');\n    var email = $('#email');\n    var phone = $('#phone');\n    var hostel_address = $('#hostel_address');\n    var formattedNumber = numeral(data.payment.account_balance).format('0,0');\n\n    var custId = $('#customerId');\n\n    customer_photo.html('<img src=\"' + data.profile.photo_path + '\" alt=\"Customer Photo\" height=\"150\">');\n    thc.html('<strong>' + data.thc + '</strong>');\n    account_balance.html('<strong>&#8358; ' + formattedNumber + '</strong>');\n    firstname.html('<strong>' + data.firstname + '</strong>');\n    lastname.html('<strong>' + data.lastname + '</strong>');\n    email.html('<strong>' + data.email + '</strong>');\n    phone.html('<strong>' + data.phone + '</strong>');\n    hostel_address.html('<strong>' + data.profile.hostel_address + '</strong>');\n    custId.val(data.id);\n\n    //console.log(orderAmount);\n\n}\n\nqrcode.callback = read;","$(document).ready(function(){\r\n    function notifyUser(data, orderAmnt, orderCat){\r\n        swal(\r\n            {\r\n                title: data.title,\r\n                text: decodeHtml(data.message),\r\n                type: data.type,\r\n                showCancelButton: false,\r\n                confirmButtonColor: \"#DD6B55\",\r\n                confirmButtonText: \"Ok!\",\r\n                closeOnConfirm: true\r\n            },\r\n            function(){\r\n                orderAmnt.val(null);\r\n                orderCat.val(1);\r\n                if(data.amount_balance){\r\n                    var nmb = numeral(data.amount_balance).format('0,0')\r\n                    $('#account_balance').html('<strong>&#8358; ' + nmb + '</strong>');\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n    function decodeHtml(html) {\r\n        var txt = document.createElement(\"textarea\");\r\n        txt.innerHTML = html;\r\n        return txt.value;\r\n    }\r\n\r\n    $('#orderForm').validate({\r\n        rules: {\r\n            order_amount: {\r\n                required: true,\r\n                number: true\r\n            }\r\n        },\r\n        messages: {\r\n            order_amount: {\r\n                require: \"Order Amount is required!\",\r\n                number: \"Order Amount must be a number!\"\r\n            },\r\n        }\r\n    });\r\n    var orderAmount = $('#orderAmount');\r\n    var orderCategory = $('#orderCategory');\r\n    var customerId = $('#customerId');\r\n\r\n    $('#orderBtn').on('click',function(e){\r\n        e.preventDefault();\r\n\r\n        $.ajax({\r\n            url: '/admin/user/order',\r\n            type: \"get\",\r\n            data: {customer_id: customerId.val(), amount: orderAmount.val(), category: orderCategory.val()},\r\n            success: function(data){\r\n                console.log(data);\r\n                //notifyUser(data.title, decodeHtml(data.message), data.type, orderAmount, orderCategory);\r\n                notifyUser(data, orderAmount, orderCategory);\r\n            },\r\n            error: function(error){\r\n                console.log(error);\r\n                //notifyUser(error.title, decodeHtml(error.message), error.type, orderAmount, orderCategory);\r\n                notifyUser(error, orderAmount, orderCategory);\r\n            },\r\n            dataType: 'json'\r\n        });\r\n\r\n    });\r\n});","var camera = (function(p_vid_id, p_inter, p_scale) {\n\n\tif (p_vid_id == undefined) {\n\t\tconsole.log(\"ERROR: You need to specify the id of the <video> element with the camera data stream.\");\n\t\treturn;\n\t}\n\n\tvar vid_id   = p_vid_id;\n\tvar interval = p_inter != undefined ? p_inter : 1000;\n\tvar scale    = p_scale != undefined ? p_scale : 0.5;\n\n    var video    = document.getElementById(vid_id);\n    var int_id   = null;\n\n\tfunction start() {\n\t\tint_id = setInterval(function(video, scale) { capture() }, interval);\n\t}\n\n\tfunction stop() {\n\t\tconsole.log(\"Clearing interval with id \"+int_id);\n\t\tclearInterval(int_id);\n\t}\n\n\tfunction capture() {\n\t\t// console.time('capture');\n\t    var w = video.videoWidth * scale;\n\t    var h = video.videoHeight * scale;\n\t    var qr_can = document.getElementById('qr-canvas').getContext('2d');\n\t        qr_can.drawImage(video, 0, 0, w, h);\n\t    try        { qrcode.decode();  }\n\t    //catch(err) { $(\"#qr-value\").text(err); }\n\t    catch(err) {\n\t\t\tvar scan_message = $(\"#scan_message\");\n\t\t\tscan_message.html('<h4 class=\"text-center\">Scan a Hex Card</h4>');\n\t\t}\n\t\t// console.timeEnd('capture');\n\t} \n\n\treturn {\n\t\tinterval:interval,\n\t\tscale:scale,\n\t\tstart:start,\n\t\tstop:stop,\n\t\tcapture:capture\n\t}\n\n})","/* JavaScript code */\n\nnavigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n\nvar cam_video_id = \"camsource\"\n\nwindow.addEventListener('DOMContentLoaded', function() {\n    // Assign the <video> element to a variable\n    var video = document.getElementById(cam_video_id);\n    var options = {\n        \"audio\": false,\n        \"video\": true\n    };\n    // Replace the source of the video element with the stream from the camera\n    if (navigator.getUserMedia) {\n        navigator.getUserMedia(options, function(stream) {\n            video.src = (window.URL && window.URL.createObjectURL(stream)) || stream;\n        }, function(error) {\n            console.log(error)\n        });\n        // Below is the latest syntax. Using the old syntax for the time being for backwards compatibility.\n        // navigator.getUserMedia({video: true}, successCallback, errorCallback);\n    } else {\n        $(\"#compat\").text('Your browser seems to be out of date. Please download the recent version!')\n        return;\n    }\n}, false);\n\n$(document).ready(function() {\n    if (!navigator.getUserMedia) return;\n    cam = camera(cam_video_id);\n    cam.start()\n})"],"sourceRoot":"/source/"}